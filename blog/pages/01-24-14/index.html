<html>
	<HEAD>
		<TITLE>Bitprint</TITLE>
		<link href="../../../css/main.css" type="text/css" rel="stylesheet" />
		<script type="text/javascript" src="../../../js/googleAnalytics.js"></script>
	</HEAD>

	<BODY>
 


 <div class="headerpage">
 <div class="headprintable">
 	<div class="homelinks">
 			<a href="../../../">Home</a></li>
 			: </li>
 			<a href="../../../blog">Blog</a></li>
 			<a href="../../../things">Things</a></li>
			<a href="https://github.com/jongtao">GitHub</a>
 			<a href="../../../contact">Contact</a></li>
 		</div>
 </div>
 </div>




	<div class="page">
	<div class="printable">
		<H1>Bitprint</H1>

<div class="code">
<pre class="code">unsigned int print_bits(void* in_ptr, unsigned int in_bytes);
unsigned int fetch_byte(void* in_ptr, unsigned int byte_offset);</pre>
</div>


		<p class="blocktext">
		I got a little confused how the variables were laid out in C structs
		(dependent on architecture and compiler), so I wrote a simple function that
		prints out the raw bits from memory in a way that is easy to read and
		understand. Struct alignment occurs on a whim of the system.
		</p>

		<p class="blocktext">
		I tried to make the function as user friendly as possible by including some
		options in the header file. You can toggle binary/hex mode or change the
		printing characters there. The second function is just there for convenience
		and curiousity.
		</p>

		<p class="blocktext">
		</p>

		<p class="blocktext">
		Here is the repository: <a href="https://github.com/jongtao/bitprint">https://github.com/jongtao/bitprint</a>
		</p>

		<H2>print_bits(...)</H2>

		<p class="blocktext">
		This function takes in a pointer <i>in_ptr</i> and prints out the bits from that
		memory location for <i>in_bytes</i> bytes. It also has some printing options that
		you can change in the header file. It returns the number of bytes printed.

		The width of the print varies according to your architecture though the
		systemâ€™s pointer size.
		</p>


		<H2>fetch_byte(...)</H2>

		<p class="blocktext">
		This function takes in a pointer <i>in_ptr</i> and and returns the value in the
		byte at in_ptr  offset by <i>in_bytes</i> bytes.
		</p>

		<H2>Sample Output</H2>

		<div class="img">
		<a href="img/1.png">
		<p><img src="img/1.png" alt="Output from test program main.c"/></p>
		</a>
		Figure 1. Output from test program main.c
		</div>

		<p class="blocktext">
		In the sample, I created the struct below, set all the values to one, and
		passed its pointer to print_bits().
		</p>

<div class="code">
<pre class="code">/* datatypes of varying sizes */
struct datatypes
{
  char a;
  short int b;
  int c;
  long int d;
  float e;
  double f;
  long double g;
  void* h;
}; /* struct test */</pre>
</div>


		
	</div>
	</div>

	<div class="page">
	<div class="printable">
	<H2>Notes</H2>
	<p class="blocktext">
		Written on the 24th of January in 2014
	</p>
	</div>
	</div>
	</BODY>
</html>
